---
title: v1.32.0
linkTitle: v1.32.0
date: 2025-01-13
description: Cloud Provider Azure v1.32.0
---
Full Changelog: [v1.31.0..v1.32.0](https://github.com/kubernetes-sigs/cloud-provider-azure/compare/v1.31.0...v1.32.0)

## Changes by Kind

### Feature

- Consolidate adjacent CIDR ranges for allowed sources ([#6995](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/6995), [@zarvd](https://github.com/zarvd))
- Feat: Lock updates on azure resources when other component is doing the same thing.
  
  This PR utilizes a lease in each service reconciliation to prevent race conditions where cloud provider and others are updating the same azure resources. ([#7193](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7193), [@nilo19](https://github.com/nilo19))
- Feat: bump k8s versions to v1.32.0 ([#7822](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7822), [@feiskyer](https://github.com/feiskyer))
- Feat: match source account as first priority in snapshot restore and volume clone scenarios ([#7699](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7699), [@andyzhangx](https://github.com/andyzhangx))
- [credential provider] Add a flag mirrorMapping. This flag is to mirror registry A to B when fetching credential. ([#6846](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/6846), [@lzhecheng](https://github.com/lzhecheng))

### Bug or Regression

- Aggregate overlapping allowed source ranges ([#6807](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/6807), [@zarvd](https://github.com/zarvd))
- Fix a bug that prevented patches to NSGs when the Azure API responded with empty strings for `DestinationAddressPrefix` ([#7854](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7854), [@kon-angelo](https://github.com/kon-angelo))
- Fix checking service references from `tags` when deleting PIP ([#7167](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7167), [@zarvd](https://github.com/zarvd))
- Fix: Change the order of updating vmss vm and vmss ([#7520](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7520), [@nilo19](https://github.com/nilo19))
- Fix: Do not move nodes that have already been attached to load balancers after restarting
  
  When using multislb, the node distribution could be changed after restarting the ccm. This is because the node distribution cache would be lost after restarting. This PR restores the node distribution each time the ccm is restarted. ([#6965](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/6965), [@nilo19](https://github.com/nilo19))
- Fix: Support switching from loadbalancer to externalName for services ([#7518](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7518), [@nilo19](https://github.com/nilo19))
- Fix: cloud provider should only generate userAgent if it's not provided ([#7723](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7723), [@andyzhangx](https://github.com/andyzhangx))
- Fix: revert to go1.22 windows filesystem stdlib behavior building with go 1.23 ([#7750](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7750), [@andyzhangx](https://github.com/andyzhangx))
- Fix: several bugs related to multiple standard load balancers mode.
  1. All endpointslices of a local service should be included in local backend pool updater, instead of only the first endpointslice.
  2. In some rare cases, migration from NIC to IP-based LB can be in a middle state where the NIC references are removed, but those IPConfigs in the backend pool are not. In this case, we should manually exclude those IPConfigs from the request body.
  3. localServiceOwnsBackendPool should compare the full backend pool name, not just prefix, because two service names can share the same prefix.
  4. There is a corner case when the cluster is being updated to multi-slb from classic NIC-based single lb, not from an IP-based cluster. In this case, if the service being reconciled is local, the cloud provider will try to update a NIC pool to IP-based pool direct, which is not allowed. We should skip adding IPs to NIC-based pool in multi-slb mode.
  5. There is a bug in ReconcileBackendPools, where we by mistake parse the LB name to use as the backend pool name. ([#7432](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7432), [@nilo19](https://github.com/nilo19))

### Other (Cleanup or Flake)

- Bump azure network api to 2024-03-01 ([#7156](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7156), [@MartinForReal](https://github.com/MartinForReal))
- Optimize CIDR aggregation to improve performance and reduce memory usage ([#7201](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7201), [@zarvd](https://github.com/zarvd))
- The apiVersion of network security group is bumped to 2024-01-01
  The apiVersion of VirtualNetworkLink is bumped to 2020-06-01
  The apiVersion of PrivateZone is bumped to 2020-06-01 ([#7155](https://github.com/kubernetes-sigs/cloud-provider-azure/pull/7155), [@MartinForReal](https://github.com/MartinForReal))

## Dependencies

### Added
- github.com/Azure/azure-kusto-go/azkustodata: [5](https://github.com/Azure/azure-kusto-go/tree/azkustodata/5)
- github.com/Azure/azure-kusto-go/azkustoingest: [5](https://github.com/Azure/azure-kusto-go/tree/azkustoingest/5)
- github.com/Azure/azure-sdk-for-go/sdk/azidentity/cache: [v0.3.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/azidentity/cache/v0.3.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/authorization/armauthorization/v2: [v2.2.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/authorization/armauthorization/v2/v2.2.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/compute/armcompute/v6: [v6.2.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/compute/armcompute/v6/v6.2.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/containerservice/armcontainerservice/v5: [v5.0.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/containerservice/armcontainerservice/v5/v5.0.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/containerservice/armcontainerservice/v6: [v6.3.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/containerservice/armcontainerservice/v6/v6.3.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/msi/armmsi: [v1.2.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/msi/armmsi/v1.2.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/network/armnetwork/v6: [v6.2.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/network/armnetwork/v6/v6.2.0)
- github.com/Azure/azure-sdk-for-go/sdk/storage/azqueue: [v1.0.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/storage/azqueue/v1.0.0)
- github.com/AzureAD/microsoft-authentication-extensions-for-go/cache: [v0.1.1](https://github.com/AzureAD/microsoft-authentication-extensions-for-go/tree/cache/v0.1.1)
- github.com/dgryski/go-rendezvous: [9f7001d](https://github.com/dgryski/go-rendezvous/tree/9f7001d)
- github.com/golang-jwt/jwt: [v3.2.1+incompatible](https://github.com/golang-jwt/jwt/tree/v3.2.1)
- github.com/keybase/go-keychain: [57a3676](https://github.com/keybase/go-keychain/tree/57a3676)
- github.com/redis/go-redis/v9: [v9.6.1](https://github.com/redis/go-redis/tree/v9.6.1)
- go.opentelemetry.io/auto/sdk: v1.1.0
- sigs.k8s.io/cloud-provider-azure/pkg/azclient/cache: v0.3.0

### Changed
- cel.dev/expr: v0.15.0 → v0.18.0
- github.com/Azure/azure-sdk-for-go/sdk/azcore: [v1.14.0 → v1.17.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/azcore/v1.14.0...sdk/azcore/v1.17.0)
- github.com/Azure/azure-sdk-for-go/sdk/azidentity: [v1.7.0 → v1.8.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/azidentity/v1.7.0...sdk/azidentity/v1.8.0)
- github.com/Azure/azure-sdk-for-go/sdk/containers/azcontainerregistry: [v0.2.1 → v0.2.2](https://github.com/Azure/azure-sdk-for-go/compare/sdk/containers/azcontainerregistry/v0.2.1...sdk/containers/azcontainerregistry/v0.2.2)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/internal/v3: [v3.0.0 → v3.1.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/resourcemanager/internal/v3/v3.0.0...sdk/resourcemanager/internal/v3/v3.1.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/privatedns/armprivatedns: [v1.2.0 → v1.3.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/resourcemanager/privatedns/armprivatedns/v1.2.0...sdk/resourcemanager/privatedns/armprivatedns/v1.3.0)
- github.com/Azure/azure-sdk-for-go/sdk/security/keyvault/azsecrets: [v1.1.0 → v1.3.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/security/keyvault/azsecrets/v1.1.0...sdk/security/keyvault/azsecrets/v1.3.0)
- github.com/Azure/azure-sdk-for-go/sdk/security/keyvault/internal: [v1.0.0 → v1.1.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/security/keyvault/internal/v1.0.0...sdk/security/keyvault/internal/v1.1.0)
- github.com/Azure/azure-sdk-for-go/sdk/storage/azblob: [v1.1.0 → v1.4.0](https://github.com/Azure/azure-sdk-for-go/compare/sdk/storage/azblob/v1.1.0...sdk/storage/azblob/v1.4.0)
- github.com/Azure/go-ansiterm: [d185dfc → 306776e](https://github.com/Azure/go-ansiterm/compare/d185dfc...306776e)
- github.com/AzureAD/microsoft-authentication-library-for-go: [v1.2.2 → v1.3.1](https://github.com/AzureAD/microsoft-authentication-library-for-go/compare/v1.2.2...v1.3.1)
- github.com/fsnotify/fsnotify: [v1.7.0 → v1.8.0](https://github.com/fsnotify/fsnotify/compare/v1.7.0...v1.8.0)
- github.com/golang-jwt/jwt/v4: [v4.5.0 → v4.5.1](https://github.com/golang-jwt/jwt/compare/v4.5.0...v4.5.1)
- github.com/google/cel-go: [v0.20.1 → v0.22.0](https://github.com/google/cel-go/compare/v0.20.1...v0.22.0)
- github.com/google/pprof: [813a5fb → 40e02aa](https://github.com/google/pprof/compare/813a5fb...40e02aa)
- github.com/gregjones/httpcache: [9cad4c3 → 901d907](https://github.com/gregjones/httpcache/compare/9cad4c3...901d907)
- github.com/jonboulle/clockwork: [v0.2.2 → v0.4.0](https://github.com/jonboulle/clockwork/compare/v0.2.2...v0.4.0)
- github.com/moby/spdystream: [v0.4.0 → v0.5.0](https://github.com/moby/spdystream/compare/v0.4.0...v0.5.0)
- github.com/onsi/ginkgo/v2: [v2.20.1 → v2.22.2](https://github.com/onsi/ginkgo/compare/v2.20.1...v2.22.2)
- github.com/onsi/gomega: [v1.34.1 → v1.36.2](https://github.com/onsi/gomega/compare/v1.34.1...v1.36.2)
- github.com/prometheus/client_golang: [v1.20.2 → v1.20.5](https://github.com/prometheus/client_golang/compare/v1.20.2...v1.20.5)
- github.com/prometheus/common: [v0.55.0 → v0.61.0](https://github.com/prometheus/common/compare/v0.55.0...v0.61.0)
- github.com/rogpeppe/go-internal: [v1.12.0 → v1.13.1](https://github.com/rogpeppe/go-internal/compare/v1.12.0...v1.13.1)
- github.com/samber/lo: [v1.38.1 → v1.47.0](https://github.com/samber/lo/compare/v1.38.1...v1.47.0)
- github.com/shopspring/decimal: [v1.3.1 → v1.4.0](https://github.com/shopspring/decimal/compare/v1.3.1...v1.4.0)
- github.com/stoewer/go-strcase: [v1.2.0 → v1.3.0](https://github.com/stoewer/go-strcase/compare/v1.2.0...v1.3.0)
- github.com/stretchr/testify: [v1.9.0 → v1.10.0](https://github.com/stretchr/testify/compare/v1.9.0...v1.10.0)
- github.com/xiang90/probing: [43a291a → a49e3df](https://github.com/xiang90/probing/compare/43a291a...a49e3df)
- go.etcd.io/bbolt: v1.3.9 → v1.3.11
- go.etcd.io/etcd/api/v3: v3.5.14 → v3.5.16
- go.etcd.io/etcd/client/pkg/v3: v3.5.14 → v3.5.16
- go.etcd.io/etcd/client/v2: v2.305.13 → v2.305.16
- go.etcd.io/etcd/client/v3: v3.5.14 → v3.5.16
- go.etcd.io/etcd/pkg/v3: v3.5.13 → v3.5.16
- go.etcd.io/etcd/raft/v3: v3.5.13 → v3.5.16
- go.etcd.io/etcd/server/v3: v3.5.13 → v3.5.16
- go.opentelemetry.io/otel/exporters/prometheus: v0.50.0 → v0.55.0
- go.opentelemetry.io/otel/metric: v1.29.0 → v1.33.0
- go.opentelemetry.io/otel/sdk/metric: v1.29.0 → v1.33.0
- go.opentelemetry.io/otel/sdk: v1.29.0 → v1.33.0
- go.opentelemetry.io/otel/trace: v1.29.0 → v1.33.0
- go.opentelemetry.io/otel: v1.29.0 → v1.33.0
- go.uber.org/mock: v0.4.0 → v0.5.0
- go.uber.org/zap: v1.26.0 → v1.27.0
- golang.org/x/crypto: v0.26.0 → v0.32.0
- golang.org/x/mod: v0.20.0 → v0.22.0
- golang.org/x/net: v0.28.0 → v0.34.0
- golang.org/x/oauth2: v0.21.0 → v0.24.0
- golang.org/x/sync: v0.8.0 → v0.10.0
- golang.org/x/sys: v0.24.0 → v0.29.0
- golang.org/x/term: v0.23.0 → v0.28.0
- golang.org/x/text: v0.17.0 → v0.21.0
- golang.org/x/time: v0.6.0 → v0.9.0
- golang.org/x/tools: v0.24.0 → v0.28.0
- google.golang.org/genproto/googleapis/api: f6361c8 → f6391c0
- google.golang.org/genproto/googleapis/rpc: 93522f1 → f6391c0
- google.golang.org/genproto: b8732ec → ef43131
- google.golang.org/protobuf: v1.34.2 → v1.36.1
- k8s.io/api: v0.31.0 → v0.32.0
- k8s.io/apimachinery: v0.31.0 → v0.32.0
- k8s.io/apiserver: v0.31.0 → v0.32.0
- k8s.io/client-go: v0.31.0 → v0.32.0
- k8s.io/cloud-provider: v0.31.0 → v0.32.0
- k8s.io/component-base: v0.31.0 → v0.32.0
- k8s.io/component-helpers: v0.31.0 → v0.32.0
- k8s.io/controller-manager: v0.31.0 → v0.32.0
- k8s.io/cri-api: v0.31.0 → v0.32.0
- k8s.io/gengo/v2: 51d4e06 → a7b603a
- k8s.io/kms: v0.32.0-alpha.0 → v0.32.0
- k8s.io/kube-openapi: 7a9a4e8 → 32ad38e
- k8s.io/kubelet: v0.31.0 → v0.32.0
- k8s.io/utils: 18e509b → 6fe5fd8
- sigs.k8s.io/apiserver-network-proxy/konnectivity-client: v0.30.3 → v0.31.0
- sigs.k8s.io/cloud-provider-azure/pkg/azclient/configloader: v0.0.25 → v0.3.3
- sigs.k8s.io/cloud-provider-azure/pkg/azclient: v0.0.43 → v0.4.9
- sigs.k8s.io/json: bc3834c → 9aa6b5e
- sigs.k8s.io/structured-merge-diff/v4: v4.4.1 → v4.4.2

### Removed
- github.com/Azure/azure-kusto-go: [v0.16.1](https://github.com/Azure/azure-kusto-go/tree/v0.16.1)
- github.com/Azure/azure-pipeline-go: [v0.2.3](https://github.com/Azure/azure-pipeline-go/tree/v0.2.3)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/compute/armcompute/v5: [v5.7.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/compute/armcompute/v5/v5.7.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/containerservice/armcontainerservice/v4: [v4.8.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/containerservice/armcontainerservice/v4/v4.8.0)
- github.com/Azure/azure-sdk-for-go/sdk/resourcemanager/network/armnetwork/v4: [v4.3.0](https://github.com/Azure/azure-sdk-for-go/tree/sdk/resourcemanager/network/armnetwork/v4/v4.3.0)
- github.com/Azure/azure-storage-queue-go: [c06a8ef](https://github.com/Azure/azure-storage-queue-go/tree/c06a8ef)
- github.com/Azure/go-autorest/autorest/validation: [v0.3.1](https://github.com/Azure/go-autorest/tree/autorest/validation/v0.3.1)
- github.com/golang/groupcache: [41bb18b](https://github.com/golang/groupcache/tree/41bb18b)
- github.com/imdario/mergo: [v0.3.6](https://github.com/imdario/mergo/tree/v0.3.6)
- github.com/mattn/go-ieproxy: [v0.0.11](https://github.com/mattn/go-ieproxy/tree/v0.0.11)
